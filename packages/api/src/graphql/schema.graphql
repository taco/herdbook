scalar DateTime

directive @public on FIELD_DEFINITION

type Rider {
    id: ID!
    name: String!
    email: String!
    createdAt: DateTime!
    sessions: [Session!]!
}

enum WorkType {
    FLATWORK
    JUMPING
    GROUNDWORK
    IN_HAND
    TRAIL
    OTHER
}

type WeeklyActivity {
    weekStart: DateTime!
    count: Int!
}

type Horse {
    id: ID!
    name: String!
    notes: String
    isActive: Boolean!
    createdAt: DateTime!
    updatedAt: DateTime!
    sessions: [Session!]!
    activity(weeks: Int): [WeeklyActivity!]!
}

type Session {
    id: ID!
    horse: Horse!
    rider: Rider!
    date: DateTime!
    durationMinutes: Int!
    workType: WorkType!
    notes: String!
    createdAt: DateTime!
    updatedAt: DateTime!
}

type AuthPayload {
    token: String!
    rider: Rider!
}

type Query {
    horses: [Horse!]!
    riders: [Rider!]!
    sessions(
        limit: Int
        offset: Int
        horseId: ID
        riderId: ID
        workType: WorkType
        dateFrom: DateTime
        dateTo: DateTime
    ): [Session!]!
    horse(id: ID!): Horse
    session(id: ID!): Session
    lastSessionForHorse(horseId: ID!): Session
}

type Mutation {
    createHorse(name: String!, notes: String): Horse!
    updateHorse(id: ID!, name: String, notes: String, isActive: Boolean): Horse!
    createSession(
        horseId: ID!
        date: DateTime!
        durationMinutes: Int!
        workType: WorkType!
        notes: String!
    ): Session!
    updateSession(
        id: ID!
        horseId: ID
        riderId: ID
        date: DateTime
        durationMinutes: Int
        workType: WorkType
        notes: String
    ): Session!
    deleteSession(id: ID!): Boolean!
    login(email: String!, password: String!): AuthPayload! @public
    signup(name: String!, email: String!, password: String!): AuthPayload!
        @public
}
