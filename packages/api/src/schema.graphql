scalar DateTime

directive @public on FIELD_DEFINITION

type Rider {
    id: ID!
    name: String!
    email: String!
    createdAt: DateTime!
    sessions: [Session!]!
}

enum WorkType {
    FLATWORK
    JUMPING
    GROUNDWORK
    IN_HAND
    TRAIL
    OTHER
}

type WeeklyActivity {
    weekStart: DateTime!
    count: Int!
}

type Horse {
    id: ID!
    name: String!
    notes: String
    createdAt: DateTime!
    updatedAt: DateTime!
    sessions: [Session!]!
    activity(weeks: Int): [WeeklyActivity!]!
}

type Session {
    id: ID!
    horse: Horse!
    rider: Rider!
    date: DateTime!
    durationMinutes: Int!
    workType: WorkType!
    notes: String
    createdAt: DateTime!
    updatedAt: DateTime!
}

type AuthPayload {
    token: String!
    rider: Rider!
}

type Query {
    horses: [Horse!]!
    riders: [Rider!]!
    sessions(limit: Int, offset: Int): [Session!]!
    horse(id: ID!): Horse
    lastSessionForHorse(horseId: ID!): Session
}

type Mutation {
    createHorse(name: String!, notes: String): Horse!
    createSession(
        horseId: ID!
        date: DateTime!
        durationMinutes: Int!
        workType: WorkType!
        notes: String
    ): Session!
    login(email: String!, password: String!): AuthPayload! @public
    signup(name: String!, email: String!, password: String!): AuthPayload!
        @public
}
