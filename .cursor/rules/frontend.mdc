---
description: Frontend specific rules for React, Vite, and Styling
globs: "packages/web/**/*"
---
# Frontend Development

- **Styling**: Tailwind CSS mobile-only. Do NOT style for desktop at all; assume mobile viewport.
  - **Constraints**: Prefer strict Tailwind utility classes (e.g., `p-4`). Arbitrary values (e.g., `p-[17px]`) are allowed as escape hatches but should be minimized.
  - **Consistency**: Modify the component definition (e.g., `button.tsx`) for global consistency. Avoid ad-hoc overrides or inconsistent styling of the same component across different pages.
- **Components**: 
  - Use existing Shadcn components in `packages/web/src/components/ui` before creating new ones.
  - **Composition over Inheritance**: Build small, single-purpose components rather than large components with many props.
- **Imports**: Use absolute imports (e.g., `@/components/ui/button`) to avoid relative path hell (`../../`).

## Data Fetching
- **Loading State**: Explicit `isLoading` flags are required in components. Do not use Suspense for data fetching. We want to explicitly manage the loading lifecycle.
- **Code Generation**: **Manual Types Only**. Do not use GraphQL Code Generator. We manually write types to understand the wiring.

## State Management
- **Keep it Local**: Prefer local `useState` or `useReducer`.
- **Global State**: Use React `Context` ONLY for truly global singleton data (e.g., Auth, Theme). 
- **Prohibited**: Do not use Redux, Zustand, or Recoil unless the complexity explicitly demands it (High Bar).

## Accessibility (Mobile First)
- **Touch Targets**: Ensure all interactive elements (buttons, links) are at least 44x44px.
- **Semantics**: Use correct HTML tags (`<button>` for actions, `<a>` for links). This prevents mobile tap highlight issues.
- **Images**: All images must have `alt` text or `role="presentation"`.

## Testing Strategy
- **User-Centric**: Use `getByRole` or `getByText` (RTL queries) to mimic user interaction. Avoid `querySelector` or testing by ID.
- **Behavioral**:
  - _Bad_: Checking if `handleSave()` was called.
  - _Good_: Clicking "Save" and verifying the success toast appears or the URL changes.
- **Network**: Mock the network layer strictly to test how the UI handles API success vs. API 500 errors.


