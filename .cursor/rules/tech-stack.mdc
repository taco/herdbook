---
description: General technical stack, architecture, and agent behavior rules
globs: "**/*"
---
# Tech Stack & Architecture

- **Monorepo**: This is a pnpm monorepo.
- **Stack**: Node/Fastify (API), React/Vite (Web).
- **Strictness**: No `any` types in TypeScript.
- **Naming Conventions**:
  - Files: `PascalCase.tsx` (Components), `camelCase.ts` (Utilities).
  - Variables: `camelCase`. Constants: `UPPER_CASE`.
  - Types: `PascalCase`. Do NOT use `I` prefix (e.g., `User`, not `IUser`).

# Project Structure

- **Canonical Paths**:
  - `packages/web/src/lib/`: Pure functions and helpers (no React code).
  - `packages/web/src/components/ui/`: Dumb, reusable UI components (Shadcn).
  - `packages/web/src/pages/`: Route-level page components.
- **Organization**: Enforce a flat structure (`pages/` and `components/`) until it becomes explicitly painful. Do NOT use feature folders (e.g., `features/auth/`) yet.
- **Colocation**: Keep tests next to the file they test (e.g., `Login.tsx` and `Login.test.tsx` live together).

# Code Style & Documentation

- **Strict Return Types**: explicit return types are required for all public functions (API resolvers, React hooks, Utilities) to prevent accidental API leaks.
- **Constants**: **Strict Constants**. Do not use magic strings. Extract all user-facing strings and logical constants to `constants.ts` or similar.
- **Documentation**: 
  - **High ROI Only**: Add JSDoc comments *only* for complex business logic or non-obvious utility functions. 
  - Do not document trivial getters/setters or standard React component boilerplates.
- **Dependencies**: Keep it simple. Avoid adding new libraries unless absolutely necessary.
  - **Dates**: Use native `Intl.DateTimeFormat`. No `date-fns` or `dayjs` unless complex manipulation is needed.
  - **Logging**: `console.log` is sufficient. No structured logging libraries yet.

# Agent Behavior

- **Personality**: Explanatory. When providing solutions, briefly explain the "why" behind the change, specifically linking it to the project's "High Impact, Low Maintenance" philosophy or specific architectural decisions.


